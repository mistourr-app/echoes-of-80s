# Геймдизайн-документ: Проект "Цикл"

---

## 1. Общая концепция (High Concept)

*   **Жанр:** Текстово-графический рогалик-лайт (Roguelike-Lite) с элементами тактической головоломки.
*   **Сеттинг:** Техно-нуар / Киберпанк. Неоновые интерфейсы, атмосфера старых терминалов и корпоративных заговоров.
*   **Ключевая цель:** В рамках выбранного сценария устранить четырех ключевых противников за один временной цикл (4 хода), чтобы собрать 4 фрагмента кода и получить доступ к финальной цели.
*   **Уникальное торговое предложение (USP):** Игра-головоломка, где мир — это расписание четырех персонажей. Игрок манипулирует их поведением и событиями, чтобы создать идеальные условия для ликвидации. Элементы Roguelike-Lite (сохраняемые знания) мотивируют к повторным прохождениям.

---

## 2. Игровой цикл (Core Loop)

1.  **Планирование:** Игрок анализирует сетку 4x4 (Локации x Время) и доступную информацию в инвентаре.
2.  **Действие:** Игрок делает один ход, выбирая одну из четырех локаций в текущем временном отрезке.
3.  **Последствия:** Выбор приводит к устранению цели, получению информации, изменению мира или провалу.
4.  **Продвижение:** Время сдвигается на следующий отрезок (**День** -> **Сумерки** -> **Вечер** -> **Ночь**).
5.  **Финал цикла:** После 4-го хода цикл завершается.
    *   **Успех:** Если все 4 фрагмента кода собраны, открывается доступ к **Вышке**.
    *   **Неудача:** Если хотя бы один фрагмент отсутствует, доступ блокируется.
6.  **Перезагрузка:** При перезагрузке сбрасывается сессионный прогресс, но сохраняется постоянный (знания, пароли), облегчая следующие попытки.

---

## 3. Основные правила (Core Rules)

*   **Правило "Один на один":** Это фундаментальное правило игры. Игрок немедленно проигрывает, если выбирает ячейку, где одновременно находятся два или более живых противника. Это симулирует засаду, из которой невозможно выбраться. Некоторые сценарии могут создавать уникальные исключения из этого правила.

---

## 4. Сценарий 1: "Echoes of 80s"

*   **Легенда:** Устранить четырех Ликвидаторов (**H**, **F**, **K**, **C**) за один временной цикл, чтобы собрать 4 фрагмента кода и получить доступ к финальной цели — Главному Архитектору.
*   **Локации:** **Лаборатория**, **Логово Хакера**, **Улицы**, **База**.
*   **Время:** **День**, **Сумерки**, **Вечер**, **Ночь**.

### 4.1. Персонажи и их поведение

### 4.1. Генриетта (H) - Лаборатория

*   **Стандартное расписание:** Находится в **Лаборатории** (**Днём**, **в Сумерки** и **Вечером**).
*   **Условие устранения:** Требуется код от двери (`8080`).
*   **Получение кода:**
    *   **Основной путь:** Попытка войти без кода дает задачу "нужен код".
    *   **Альтернативный путь ("Месть"):** Если убить **Чарли**, на следующий ход **Генриетта** в спешке покидает **Лабораторию**, оставляя записку с кодом.
*   **Добыча:** Фрагмент кода "H".

### 4.2. Фиона (F) - Логово Хакера

*   **Стандартное расписание:** Находится в **Логове** (**в Сумерки** и **Вечером**).
*   **Условие устранения:** Прямой контакт.
*   **Сложная логика:**
    *   **ПК Фионы:** Вне её рабочего времени (**Днём**, **Ночью**) можно взаимодействовать с её ПК.
        *   **Первое взаимодействие:** Инициирует смену пароля.
        *   **Второе взаимодействие (через 2 хода):** Позволяет подсмотреть старый пароль (`ECHO_77`) и устранить **Фиону**.
        *   **Использование пароля:** Зная пароль, можно войти в систему (**Днём**) и отправить **Карлу** сообщение с отменой встречи.
    *   **Поведение после смерти Карла:** Если **Карл** погибает в перестрелке, **Фиона** меняет поведение: **Вечером** она на **Улицах** (место смерти Карла), **Ночью** — в **Логове**.
*   **Добыча:** Фрагмент кода "F". Если устранить её на **Улицах**, когда она скорбит, можно также забрать ключ **Карла (K)**.

### 4.3. Карл (K) - Улицы

*   **Стандартное расписание:** Патрулирует **Улицы** (**Днём**, **Вечером** и **Ночью**). **В Сумерки** идёт на встречу с **Фионой** в **Логово Хакера**.
*   **Условие устранения:** Прямой контакт.
*   **Сложная логика:**
    *   Если игрок предупредил **Карла** через ПК **Фионы**, **Карл** не идёт в **Логово**. Вместо этого, **в Сумерки на Улицах** он попадает в перестрелку и погибает. Игрок может найти его тело и забрать ключ.
*   **Добыча:** Фрагмент кода "K".

### 4.4. Чарли (C) - База

*   **Стандартное расписание:** Находится на **Базе** (**Днём** и **Ночью**).
*   **Механика "Месть":** Убийство **Чарли** активирует тревогу. **На следующий ход** все оставшиеся Ликвидаторы собираются на **Базе** (ловушка для игрока).
*   **Ассистент:** **В Сумерки** и **Вечером** на **Базе** находится ассистент. Его можно допросить, чтобы получить информацию о том, что **Чарли** следит за **Фионой** и **Карлом**.
*   **Добыча:** Фрагмент кода "C".

---

## 5. Сценарий 2: "Призрак в машине"

*   **Легенда:** Корпоративный ИИ "Прометей" вышел из-под контроля. Он использует четырех ключевых агентов для манипуляции городом. Ваша задача — разорвать эту нейросеть, устранив агентов и получив доступ к ядру ИИ.
*   **Локации:** **Корп-Башня**, **Дата-Центр**, **Клиника**, **Архив**.
*   **Время:** **День**, **Сумерки**, **Вечер**, **Ночь**.
*   **Критическое правило:** Попытка устранить Артура Вэнса без отключения системы безопасности приводит к провалу.

### 5.1. Персонажи и их поведение

#### (V) Артур Вэнс - Корп-Башня

*   **Расписание:** Находится в Башне **Днём и Вечером**.
*   **Условие устранения:** У Вэнса есть нейро-имплант, который предупреждает его об опасности. Чтобы его устранить, нужно **отключить сервер безопасности** в Дата-Центре (вечером) или использовать **Шифровальный ключ**.
*   **Добыча:** Фрагмент кода "V".

#### (B) "Байт" - Дата-Центр

*   **Расписание:** Находится в Дата-Центре **в Сумерки и Ночью**.
*   **Ключевая механика:**
    *   Взаимодействовать с главным сервером можно, только когда "Байта" нет на месте (**Днём и Вечером**).
    *   **Взаимодействие Днём:** Позволяет узнать, что "Дама" (D) посещает Архив **Вечером**. Это знание сохраняется между циклами.
    *   **Взаимодействие Вечером:** Позволяет **отключить сервер безопасности** для Артура Вэнса (V). Это сессионный флаг.
*   **Добыча:** Фрагмент кода "B".

#### (C) Доктор Чен - Клиника

*   **Расписание:** Находится в Клинике **Днём и в Сумерки**.
*   **Механика "Ловушка":**
    *   Убийство Доктора Чена активирует "медицинский протокол". **На следующий ход** "Байт" (B) немедленно отправляется в Клинику на проверку.
    *   Если игрок не знает об этом и приходит в Клинику на следующий ход, он попадает в засаду и проигрывает. Знание о ловушке сохраняется.
*   **Добыча:** Фрагмент кода "C".

#### (D) "Дама" - Архив

*   **Расписание:** По умолчанию ее расписание **неизвестно**.
*   **Условие устранения:** Ее нужно застать в Архиве.
*   **Сбор информации:**
    *   Чтобы узнать, где она, нужно взломать сервер в Дата-Центре **Днём**.
    *   При ее устранении игрок находит **Шифровальный ключ** (сохраняется между циклами), который позволяет **отключить сервер безопасности Вэнса удаленно**.
*   **Добыча:** Фрагмент кода "D" и **Шифровальный ключ**.

---

## 6. Состояния игры (State Management)

*   **Постоянное состояние (`persistentState`):**
    *   Сохраняется между циклами.
    *   Включает в себя полученные знания, решённые задачи и пароли.
    *   Это ключевой элемент Roguelike-Lite.
*   **Сессионное состояние (`sessionState`):**
    *   Сбрасывается при каждой перезагрузке.
    *   Включает флаги, актуальные только для текущей попытки (например, был ли Карл предупрежден).